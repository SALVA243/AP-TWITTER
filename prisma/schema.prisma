generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  IdUser         Int      @id @default(autoincrement())
  Nom            String   @db.VarChar(25)
  NomUtilisateur String   @db.VarChar(25)
  email          String   @unique @db.VarChar(255)
  PhotoProfil    String?  @db.VarChar(25)
  MotPasse       String   @db.VarChar(25)
  DateEnreg      DateTime @default(now()) @db.Timestamp(6)
  role           Role     @default(USER)
  active         Boolean  @default(false)
  Follower       String?  @db.VarChar(25)
  Following      String?  @db.VarChar(25)
  Post           Post[]
  Like           Like[]
}

enum Role {
  USER
  ADMIN
}

model Post {
  IdPost      Int      @id @default(autoincrement())
  ContenuPost String?  @db.VarChar(255)
  ImagePost   String?
  createdAt   DateTime @default(now()) @db.Timestamp(6)
  updatedAt   DateTime @updatedAt
  published   Boolean  @default(false)
  Partage     Int
  User        User     @relation(fields: [UserId], references: [IdUser])
  UserId      Int
  Like        Like[]
}

model Like {
  User       User @relation(fields: [UserIdlike], references: [IdUser])
  UserIdlike Int
  Postlike   Post @relation(fields: [PostId], references: [IdPost])
  PostId     Int
  NombreLike Int

  @@id([UserIdlike, PostId])
}
